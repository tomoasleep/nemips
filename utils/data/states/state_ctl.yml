settings:
  dependencies:
    - const_alu_ctl
    - const_io
    - const_mux
    - const_opcode
    - const_sram_cmd
    - const_state
default:
  pc_src: pc_src_alu
  wd_src: wd_src_pc
  alu_op: alu_op_decode
  alu_srcA: alu_srcA_rd1
  alu_srcB: alu_srcB_rd2
  go_src: go_src_ok
  sram_cmd: sram_cmd_none
  regdist: regdist_rd
  inst_or_data: iord_inst
  io_read_cmd: io_length_none
  io_write_cmd: io_length_none
states:
  state_fetch:
    alu_srcA: alu_srcA_pc
    alu_srcB: alu_srcB_const4
    alu_op: alu_op_add
    wd_src: wd_src_pc
    inst_or_data: iord_inst
    pc_src: pc_src_alu
    inst_write: 1
    pc_write: 1

  state_decode:
    alu_op: alu_op_add
    alu_srcA: alu_srcA_pc
    alu_srcB: alu_srcB_imm_sft2

  state_memadr:
    alu_op: alu_op_add
    alu_srcA: alu_srcA_rd1
    alu_srcB: alu_srcB_imm

  state_memadrx:
    alu_op: alu_op_add
    alu_srcA: alu_srcA_rd1
    alu_srcB: alu_srcB_rd2
    a2_src_rd: 1

  state_mem_read:
    inst_or_data: iord_data
    sram_cmd: sram_cmd_read

  state_mem_read_wait:
    inst_or_data: iord_data
    go_src: go_src_mem_read

  state_mem_write:
    inst_or_data: iord_data
    mem_write: 1
    sram_cmd: sram_cmd_write

  state_mem_writex:
    inst_or_data: iord_data
    mem_write: 1
    sram_cmd: sram_cmd_write

  state_mem_wb:
    regdist: regdist_rt
    wd_src: wd_src_mem
    ireg_write: 1

  state_mem_wbx:
    regdist: regdist_rd
    wd_src: wd_src_mem
    ireg_write: 1

  state_io_read:
    go_src: go_src_io_read
    io_read_cmd: io_length_word

  state_io_wb:
    regdist: regdist_rd
    wd_src: wd_src_io
    ireg_write: 1

  state_io_write:
    go_src: go_src_io_write
    io_write_cmd: io_length_word

  state_alu:
    alu_srcA: alu_srcA_rd1
    alu_srcB: alu_srcB_rd2
    alu_op: alu_op_decode

  state_alu_wb:
    regdist: regdist_rd
    wd_src: wd_src_alu_past
    ireg_write: 1

  state_alu_imm:
    alu_srcA: alu_srcA_rd1
    alu_srcB: alu_srcB_imm
    alu_op: alu_op_decode

  state_alu_zimm:
    alu_srcA: alu_srcA_rd1
    alu_srcB: alu_srcB_zimm
    alu_op: alu_op_decode

  state_alu_imm_wb:
    regdist: regdist_rt
    wd_src: wd_src_alu_past
    ireg_write: 1

  state_branch:
    alu_srcA: alu_srcA_rd1
    alu_srcB: alu_srcB_rd2
    alu_op: alu_op_decode
    pc_branch: 1
    pc_src: pc_src_bta

  state_jal:
    wd_src: wd_src_pc
    regdist: regdist_ra
    pc_src: pc_src_jta
    ireg_write: 1
    pc_write: 1

  state_jalr:
    wd_src: wd_src_pc
    regdist: regdist_ra
    pc_src: pc_src_alu
    ireg_write: 1
    pc_write: 1

  state_jmp:
    pc_src: pc_src_jta
    pc_write: 1

  state_jmpr:
    pc_src: pc_src_alu
    pc_write: 1
